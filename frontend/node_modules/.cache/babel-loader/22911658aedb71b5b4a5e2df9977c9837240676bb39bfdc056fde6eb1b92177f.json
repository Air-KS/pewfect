{"ast":null,"code":"/*\n  ./frontend/src/middleware/auth.js\n*/\n\nexport function authGuard(to, from, next) {\n  const loggedIn = localStorage.getItem('user'); // Vérifie si l'utilisateur est connecté\n  const userRole = localStorage.getItem('role'); // Récupère le rôle de l'utilisateur\n\n  // Ajout des instructions de débogage\n  console.log('Logged In:', loggedIn);\n  console.log('User Role:', userRole);\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    if (!loggedIn) {\n      next('/'); // Redirige vers la page d'accueil si non connecté\n    } else if (to.meta.roles && !to.meta.roles.includes(userRole)) {\n      next('/'); // Redirige vers la page d'accueil si le rôle ne correspond pas\n    } else {\n      next(); // Autorise l'accès si connecté et rôle correspondant\n    }\n  } else {\n    next(); // Autorise l'accès si la route ne nécessite pas d'authentification\n  }\n}","map":{"version":3,"names":["authGuard","to","from","next","loggedIn","localStorage","getItem","userRole","console","log","matched","some","record","meta","requiresAuth","roles","includes"],"sources":["/home/zana/pewfect-1/frontend/src/middleware/auth.js"],"sourcesContent":["/*\n  ./frontend/src/middleware/auth.js\n*/\n\nexport function authGuard(to, from, next) {\n  const loggedIn = localStorage.getItem('user'); // Vérifie si l'utilisateur est connecté\n  const userRole = localStorage.getItem('role'); // Récupère le rôle de l'utilisateur\n\n  // Ajout des instructions de débogage\n  console.log('Logged In:', loggedIn);\n  console.log('User Role:', userRole);\n\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    if (!loggedIn) {\n      next('/'); // Redirige vers la page d'accueil si non connecté\n    } else if (to.meta.roles && !to.meta.roles.includes(userRole)) {\n      next('/'); // Redirige vers la page d'accueil si le rôle ne correspond pas\n    } else {\n      next(); // Autorise l'accès si connecté et rôle correspondant\n    }\n  } else {\n    next(); // Autorise l'accès si la route ne nécessite pas d'authentification\n  }\n}\n"],"mappings":"AAAA;AACA;AACA;;AAEA,OAAO,SAASA,SAASA,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,EAAE;EACxC,MAAMC,QAAQ,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;EAC/C,MAAMC,QAAQ,GAAGF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;;EAE/C;EACAE,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEL,QAAQ,CAAC;EACnCI,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEF,QAAQ,CAAC;EAEnC,IAAIN,EAAE,CAACS,OAAO,CAACC,IAAI,CAACC,MAAM,IAAIA,MAAM,CAACC,IAAI,CAACC,YAAY,CAAC,EAAE;IACvD,IAAI,CAACV,QAAQ,EAAE;MACbD,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;IACb,CAAC,MAAM,IAAIF,EAAE,CAACY,IAAI,CAACE,KAAK,IAAI,CAACd,EAAE,CAACY,IAAI,CAACE,KAAK,CAACC,QAAQ,CAACT,QAAQ,CAAC,EAAE;MAC7DJ,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;IACb,CAAC,MAAM;MACLA,IAAI,CAAC,CAAC,CAAC,CAAC;IACV;EACF,CAAC,MAAM;IACLA,IAAI,CAAC,CAAC,CAAC,CAAC;EACV;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}